# 1️⃣ 리뷰
**날짜:** 2025.07.31 (목)

### 오늘 작업한 내용
- [x] API 명세 회의
- [x] ERD 타입 설정 마무리
- [x] AWS EC2 인스턴스 생성
- [ ] CI/CD 구축하기

</br>

### 작업에서 배운 내용

#### 1. Aws 리소스 끼리도 접근 제어가 필요

배포 자동화 시스템을 구축하기 위해 AWS의 CodeDeploy 서비스를 처음 사용해보기로 했다.
자동 배포는 GitHub Actions를 활용해 특정 브랜치에 PR이 병합될 때 자동으로 실행되도록 설정했다.
즉, 코드가 병합되고 빌드가 진행되면 생성물이 AWS S3에 업로드되고, CodeDeploy가 S3에 올라간 jar 파일을 EC2에서 실행하는 흐름이다.

이 과정에서 AWS 내 리소스들 간에도 접근 권한 제어가 필수적이라는 것을 알게 됐다.
CodeDeploy가 EC2와 S3에 접근할 권한을 가져야 하고, GitHub Actions도 AWS 내 리소스는 아니지만 ARN 기반으로 S3 접근 권한을 명확히 부여받아야 한다.
그 과정에서 어떤 리소스가 어떤 권한을 가져야 하는지 파악하는 것 부터 어려웠던 것 같다.

<br/>

### 어려웠던 점

#### 1. EC2 인스턴스를 NAT 처럼 활용하기 

EC2 인스턴스 두 개를 만들어 하나는 NAT 역할과 API 서버 역할을 동시에 맡기고,
다른 하나에는 RDS 대신 직접 MySQL을 설치해 DB 서버로 사용하려 했다.
RDS대신 EC2에 직접 DB 구축해보면서 학습하려고 진행한 일이었는데, EC2에서 DB 서버에 접근하는 것은 성공했지만, MySQL 설치 과정에서 문제가 발생했다. 특정 포트가 차단되어 있어 외부로 나가는 연결이 되지 않는다는 메시지가 떴다.  

원인을 명확히 파악하지 못한 채 하루가 지나갔고, 문제 해결에 난항을 겪었다...

<br/>

#  2️⃣ 회고 (KPT)

### KEEP (잘한 점 / 유지하고 싶은 습관)

#### K1. 실패는 했지만 학습 이라는 목표는 달성한 점

결국 EC2 인스턴스를 NAT처럼 활용하는 시도는 원하는 결과를 내지 못해 시간을 허비한 것처럼 느껴졌다.
하지만 문제의 원인을 찾는 과정에서 AWS와 네트워크 관련 자료를 많이 살펴볼 수 있었고,
‘학습’이라는 본래 목표에는 충분히 부합하는 시간이었다고 생각한다.
너무 좌절하지 말자..

<br/>

### Problem (아쉬웠던 점 / 놓친 부분)

#### P1. AWS CodeDeploy 권한 요청 과정에서 명확하지 못했던 점

CodeDeploy 기능을 써보고 싶어 Dangle께 권한 요청을 드렸다.
그런데 Dangle께서 구체적으로 어떤 권한이 필요한지 물어보셨다.
나는 단지 ‘role을 만드는 권한’ 정도로만 생각하고 있었고, 정확한 권한 이름이나 범위는 알지 못했다.
그 순간 아차 싶었고 바로 “잠시만요”라며 찾아보기 시작했다.
그리고 그 시간이 생각보다 길게 소요됐다.
내가 원하는 것을 정확히 표현하지 못하는 것이 소통의 병목이 된다는걸 알게 되었다.

<br/>

### Try (다음에 시도할 것 / 개선 방향)

#### T1. 잘 모르는게 있으면 찾아보되, 얼마나 시간이 걸릴 것 같은지 말씀드리기

요청할 때 바로 모르면 솔직히 말하되,
“제가 지금 찾아보고 있는데 오래 걸릴 것 같아요. 조금만 기다려 주세요.”
혹은 “필요한 권한을 정확히 파악해서 다시 말씀드리겠습니다.”
이런 식으로 상황을 구체적으로 설명하도록 하자.

<br/>

#  3️⃣ 학습 내용 정리

## 외부에서 internet gateway를 통해 AWS EC2에 접근하는 과정
<img width="2720" height="1856" alt="image" src="https://github.com/user-attachments/assets/c0e084d7-61ba-47ac-bcf3-5c74dbac68db" />


<br/>
