# 1️⃣ 리뷰
**날짜:** 2025.08.12 (화)

### 오늘 작업한 내용
- [ ] AWS S3 연동하기
  - [x] S3Service 구현
  - [x] Github Secret 등록
  - [ ] 배포
- [ ] 센터 필터링 모듈 구현  

</br>

### 작업에서 배운 내용

#### 1. IAM으로 S3 권한 제어하기

이전에는 S3를 사용할 때 권한을 너무 넓게 열어두고 사용했었는데, AWS 수업을 듣고 나서 이번에는 IAM 권한 부여 방식을 적용해보기로 했다.

우리 서비스에서 이미지에 관한 작업을 할 때 S3에 접근하는 주체는 크게 두 가지로 나뉜다.
1. EC2 서버: 배포된 서버에서 차량 이미지 업로드, 삭제, 조회를 위해 접근이 필요하다.
2. CloudFront: 프론트엔드에서 `<img src="">`로 차량 이미지를 불러올 때, S3에 저장된 이미지에 접근해야 한다. 
프론트엔드 빌드 산출물은 S3의 `/frontend` 경로에 업로드하고 CloudFront를 통해 접근해서 배포 중이다.

우선, EC2에는 `/images` 경로에 대해 아래와 같은 권한을 부여해야 했다.
IAM에서 EC2 리소스를 선택해 위의 권한을 가진 Role을 생성하고, 이를 EC2에 할당하는 방식으로 권한을 설정하면 된다.
- s3:PutObject (이미지 업로드)
- s3:GetObject (업로드된 이미지 조회)
- s3:DeleteObject (이미지 삭제)

프론트엔드에서 이미지를 URL로 불러올 때 권한 문제도 고민이 많았다.
처음에는 이미지를 업로드할 때 ACL을 Public-Read로 설정해 쉽게 접근할 수 있도록 했지만,
AWS에서는 보안상 Public 접근을 지양하고 있어 적절치 않다고 판단했다.
AWS에서 권장하는 방식은 프리사인 URL을 통해 제한된 시간 동안만 접근을 허용하는 것이었으나,
우리 서비스 특성상 이미지가 항상 노출되어야 하므로 유효기간이 있는 프리사인 역시 적합하지 않았다.

그러던 중 FE 빌드 산출물이 CloudFront를 통해 배포 중인 것이 떠올랐고 이걸 활용해봐도 좋겠다는 생각이 들었다.
OAC(Origin Access Control)를 활용해 S3 `/images` 경로에 대한 접근을 CloudFront에서만 허용하는 설정을 적용했다.
이 부분은 이미 FE 배포를 위해 부여해두었던 정책이어서 `/images` 경로만 추가해주면 되었다.
DB에 저장하는 이미지 URL도 기존 S3 도메인이 아닌 CloudFront 도메인으로 변경해주었다.

> S3 도메인은 private으로 막혀있어서 접근 불가능하다

우선, 이렇게 마무리 짓긴 했는데... 현재 로컬 개발 환경에는 accessKey와 secretKey가 없어 제대로 동작 여부를 확인하지 못한 상태다.
내일 admin user 정보를 받으면, dev 환경에서 테스트를 진행하며 보완해봐야겠다.
        
<br/>

### 어려웠던 점

#### 1. 현업에선 잘 모르는 분야에 대해 작업할 때 어떻게 진행하는 걸까

예전에는 팀 내에서 AWS 권한을 자유롭게 가지고 있어서 S3 설정시 별도의 허가 과정 없이 진행할 수 있었다.
그러나 이번에는 AWS 권한에 대해 꼼꼼하게 관리 해보고 싶었기 때문에, AWS IAM에서 Role을 생성하거나 권한을 요청하는 과정에서 시간이 지연됐다.
필요한 권한이 뭔지 파악해서 팀원들에게 공유해야 하는데 그 부분이 병목처럼 느껴지기도 했다.

사실 이런 방식으로 권한을 부여해보는게 처음이라 어떤 권한이 정확히 필요한지 확신이 없었다. 
테스트해보고 싶은데 마음대로 할 수 없는 상황이라 고민하는 시간이 길어졌다. 
‘이렇게 하는 게 맞나?’ ‘더 좋은 방법은 없을까?’ 하는 생각이 계속 들었다.
게다가 권한 요청 내용을 자주 수정하는 것도 부담스럽고, 그걸 매번 확인해야 하는 팀원들에게도 민폐가 될까봐 쉽게 말을 꺼내지 못했다.

문득, 현장에서는 이런 권한 요청 절차가 어떻게 진행될지 궁금해졌다.  
보안 업무를 담당하는 다른 부서와는 어떻게 협업하는지, 서로 다른 직무 간의 소통과 조율은 어떤 방식으로 이뤄지는지도 궁금해졌다.

비록 현장 상황을 정확히 알진 못하지만 이번 경험을 통해 깨달은 점이 있다면,  
‘타 부서’와 협업할 때는 내가 모르는 부분을 명확히 인지하고, “내가 무엇을 하고 싶은지”를 분명히 전달해야 상대방이 자신의 전문 지식을 바탕으로 적절한 도움을 줄 수 있다는 것이다.

결국, “내가 뭘 하고 싶은지”, “그래서 무엇이 필요한지”, “상대방이 무엇을 알려줬으면 좋겠는지”를 잘 표현하는 연습이 필요하다는 생각이 들었다.

<br/>

#  2️⃣ 회고 (KPT)

### KEEP (잘한 점 / 유지하고 싶은 습관)

#### K1. 50분 일하고 10분 질문 주고받기

지난주 그룹 회고에서 결정한 ‘50분 집중 근무 후 10분 질문 주고받기’ 방식을 실제로 적용해봤다.
질문은 슬랙에 요청 사항이나 궁금한 점을 남겨두고, 10분 동안 그 질문들에 답변을 주는 식으로 진행했다. 만약 짧게 해결되지 않는 내용은 회의 큐에 올리거나 구두로 따로 설명하는 방식으로 마무리했다.

이 방식을 적용하기 전과 비교해보면,  
첫째, 집중도가 훨씬 높아졌다. 50분이라는 명확한 작업 시간을 정해두니, 그 시간 동안 한 가지 일에 집중하기가 훨씬 수월했다.  
둘째, 질문 시간을 미리 정해두니 예전처럼 ‘질문할 타이밍을 계속 고민’하지 않아도 됐다. 슬랙에 질문을 남겨두고, 정해진 시간에 답변을 받으니 방해받는 느낌이 줄어들고 마음이 한결 편해졌다.

<br/>

### Problem (아쉬웠던 점 / 놓친 부분)

#### P1. 조리 있게 글 쓰기가 어렵다

오늘 슬랙에 Role 생성 관련 질문을 남겼는데, 쓰다 보니 글이 길어져서 정작 가장 중요한 질문이 글 중간에 묻혀버렸다.  
내가 읽어도 다시 읽어봐야 이해가 되는 수준이었으니, 다른 사람들은 더 이해하기 어려웠을 것 같다.

<br/>

### Try (다음에 시도할 것 / 개선 방향)

#### T1. 글도 두괄식으로 쓰기. 중심 내용 별로 글 쪼개기.

지난주 그룹 회고에서 나의 잘 안 고쳐지는 습관 중 하나인 "말을 장황하게 한다"에 대해 여러가지 조언을 부탁드렸다.
그때 들었던 조언 중 하나가 **두괄식으로 말하기**였다. 장황하게 말해도 두괄식으로만 하면 중심이 잡힌다는 얘기였다.

그 조언이 떠올라, 질문 내용을 다시 수정해서 보냈다.
가장 중요한 질문을 맨 위에 두고, 나머지 내용은 비슷한 것끼리 묶어서 소제목을 붙였다.
수정 후 글 구조는 이렇게 변했다.
- 질문
- 상황 설명
- 필요한 권한
- 예상 설정 과정

다 쓰고 나니 이전보다 훨씬 빨리 읽히는 글이 된 것 같았다.  
다만 나 혼자만 그렇게 느낀 건지… 다른 분들도 그렇게 느끼셨을지는 모르겠다. 🫠  
말하기 연습처럼 글쓰기도 다른 사람의 피드백을 종종 받아봐야겠다는 생각이 들었다.

<br/>
