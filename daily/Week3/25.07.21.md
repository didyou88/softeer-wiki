# 1️⃣ 리뷰
**날짜:** 2025.07.21 (월)

### 오늘 작업한 내용

- [x] W2-S6 과제 수행
    - [x] 로그인 여부 확인 Interceptor 생성
    - [x] 로그인 여부에 따라 메인화면 동적 html 응답
    - [x] /mypage 접근 관리
    - [x] 로그아웃 구현
- [ ] W3-S7 과제 수행
    - [x] JDBC, H2 연동
    - [x] User, Article 테이블, 쿼리 작성
    - [x] DB 회원 등록 기능 구현
    - [x] DB 게시글 등록 기능 구현
    - [ ] 등록 게시글 메인 페이지에 띄우기
    - [ ] 에러 처리 페이지 구현
      <br/>

### 작업에서 배운 내용

#### 1. JDBC에서 중복 코드 줄이기
JDBC로 DB 작업을 하니 `Connection`, `PreparedStatement`, `ResultSet`을 종료하는 코드가 반복됐다.
중복 코드를 줄이기 위해 DatabaseManager 클래스에서 연결과 종료를 공통으로 처리할 수 있도록 메서드를 만들었다.
하지만 이후에 try-with-resources 문법을 적용하면,
직접 종료를 명시하지 않아도 try 문이 끝나면 자동으로 종료가 된다는 것을 알게 되었다.

try-with-resources 문법은 자바 7부터 도입된 문법인데,
AutoCloseable 인터페이스를 구현한 객체는 try 블록을 벗어날 때 자동으로 close()가 호출된다는 규칙이 있다.
예를 들어서, 아래와 같이 코드를 작성하면, 작업 수행 후 try문이 끝날때 `Connection`, `PreparedStatement`, `ResultSet`가 종료된다.

```java
try (Connection conn = DriverManager.getConnection();
  PreparedStatement pstmt = conn.prepareStatement();
  ResultSet rs = pstmt.executeQuery()) {
    // 작업 수행
} catch (SQLException e) {
    // 예외 처리
}
```
그렇지만 항상 try-with-resources을 적용할 수 있었던 건 아니다.
`ResultSet`의 경우 `PreparedStatement`에 객체를 할당하고 선언해야 하는 경우가 있어서 다시 고민에 빠졌다.
하지만 JDBC 명세를 읽어보니, `PreparedStatement`를 닫으면 해당 `Statement`에서 생성된 `ResultSet`도 자동으로 닫힌다는 내용이 나와있다.

> "Closing a Statement (or PreparedStatement) object will close any open ResultSet objects that were generated by that Statement."  
[출처](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html)

JDBC는 2학년 때 과제를 하면서 간단히 사용해본 것이 전부였고, 이후에는 주로 JPA를 사용했기 때문에 자바에서 쿼리문이 처리되는 과정을 거의 잊고 있었다.
이번에 다시 JDBC 명세를 읽고 공부하면서 동작 원리를 되짚어볼 수 있었고,
효율적으로 사용하기 위한 고민도 같이하면서 try-catch 문을 활용한 자원 관리 방법도 새롭게 배울 수 있었다.
<br/>

### 어려웠던 점

#### 1. Interceptor에서 체크 결과를 어떻게 반환할 것인가?

인터셉터에서 로그인 여부에 따라 요청을 계속 진행할지, 아니면 중단하고 응답을 반환할지를 판단해야 했다.
처음엔 boolean 값을 반환해서 성공/실패만 구분하려 했지만, 실패한 경우에는 HttpResponse도 함께 만들어서 반환해야 하는 문제가 있었다.
다른 코드에선 `isPresent()`라는 메서드를 만들어서 boolean 값을 먼저 반환하고 필요한 응답을 반환하는 형태였는데,
인터셉터 클래스에서 매번 두 번씩 메서드를 호출한다는 점이 응답 생성 로직과 검증 로직이 섞여 너무 복잡하게 느껴졌다.

그때 마침, 지난주 그룹 세션에서 재현님이 알려주신 record가 생각났다.
`Java record`는
- 불변 객체를 간결하게 표현할 수 있고
- 생성자 / getter / toString() 등을 자동으로 만들어주는데다가
- 복잡한 데이터를 구조화 할 수 있다는 장점이 있다.

이후 아래와 같이 InterceptorResult라는 record를 만들어 사용하고 나니
로그인 여부(성공/실패)와, 실패 시 반환할 HttpResponse를 하나의 객체로 깔끔하게 전달할 수 있게 되었다.

```java
public record InterceptorResult(boolean success, HttpResponse response) {}
```

<br/>

#  2️⃣ 회고 (KPT)

### KEEP (잘한 점 / 유지하고 싶은 습관)

#### K1. 아침에 10분 일찍 나오기

경기도에 살고 있다보니 출발 시간이 10분만 달라도 도착 시간이 20분 이상 차이 나는 경우가 자주 있었다.
한동안은 아침 일찍 출근해야 할 일이 없다 보니 첫 주에는 10분 일찍 나오는 것도 쉽지 않았다.
하지만 지난 일주일간은 30분 일찍 도착해, 하루를 시작하기 전에 오늘 해야 할 일을 정리하고 미리 공부할 준비를 하는 시간을 가지려고 노력했다.
아슬아슬하게 도착했을 때와는 몇 가지 뚜렷한 차이를 느낄 수 있었는데,

- 10시부터 바로 집중할 수 있다 (예열 완료)
- 오전 시간에 낭비되는 시간이 줄어들었다.
  (화장실, 물 떠오기, 주변 환경 적응 등으로 허비되는 시간이 감소)
- 하루 목표 완수율이 **60% → 80%**로 상승했다.

흔한 말이긴 하지만 하루의 시작이 마음가짐, 몰입도, 성과에까지 영향을 준다는 것을 체감한 한 주였다.
<br/>

### Problem (아쉬웠던 점 / 놓친 부분)

#### P1. 조를 바꿀 때마다 그룹 세션 집중도가 달라진다

함께 조를 이루는 사람에 따라 내가 발표하는 내용의 깊이와 밀도가 달라지는 걸 느꼈다.
어떤 조합에서는 더 분석적으로 이야기하게 되고, 어떤 조합에서는 대화가 겉돌기도 했다.

<br/>

### Try (다음에 시도할 것 / 개선 방향)

#### T1. 공사 구분 확실히

문제 원인 분석  
- 친밀한 사람과 짝을 이루면 너무 편해져서 이야기의 밀도가 낮아지는 경우가 있음
- "이 사람은 내 코드를 잘 아니까 굳이 설명 안 해도 되겠지"라는 착각
- 주제에서 살짝 벗어난 이야기로 흐름이 새는 경우

해결 방향  
내가 말하고 싶은 핵심을 명확히 글로 정리하기  
→ 큰 흐름을 먼저 잡아두면 세부 내용이 흐트러지지 않는다  
→ 이 방법은 이미 스쿼드 세션에서 효과를 본 적 있으니, 그룹 세션에도 적용하자  

공과 사를 명확히 구분하기  
→ 편한 분위기를 만들되, 공적인 시간에는 공적인 태도를 유지하기  
→ 친밀함과 집중은 양립할 수 있다. “편안하지만 흐트러지지 않는 분위기”를 연습해보자.  

<br/>

#  3️⃣ 학습 내용 정리

<br/>
